<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Market Time Machine</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=JetBrains+Mono:wght@400;700&display=swap"
        rel="stylesheet">
</head>

<body>
    <div class="timeline-grid">
        <header class="timeline-header">
            <h1>Market Time Machine</h1>
            <p style="color: var(--text-secondary); margin-top: 10px; font-size: 1.2rem;">Select a historical crash to
                simulate.</p>
        </header>

        {% for era in scenarios %}
        <div class="era-card" onclick="window.location.href='/simulate/{{ era.id }}'">
            <span class="era-year">{{ era.year_start }}</span>
            <div style="position:relative; z-index: 2;">
                <h2>{{ era.name }}</h2>
                <p>{{ era.description }}</p>
            </div>
        </div>
        {% endfor %}
    </div>
    <div class="bg-animation" id="bg-animation"></div>

    <script>
        const symbols = ['$', 'â‚¬', 'Â£', 'Â¥', 'â‚¿', 'â‚¹', 'â‚½', 'â‚©', 'ðŸ“‰', 'percent'];
        const container = document.getElementById('bg-animation');

        function spawnSymbol() {
            const el = document.createElement('div');
            const sym = symbols[Math.floor(Math.random() * symbols.length)];
            el.innerText = sym === 'percent' ? '%' : sym;
            el.className = 'currency-symbol';

            // Random positioning
            el.style.left = Math.random() * 90 + 5 + 'vw'; // Avoid edges
            el.style.fontSize = Math.floor(Math.random() * 150 + 50) + 'px'; // Huge

            // Random Glitch Chance
            if (Math.random() < 0.2) {
                el.classList.add('glitch');
            } else {
                el.style.animation = `drift ${Math.floor(Math.random() * 20 + 20)}s linear infinite`;
            }

            container.appendChild(el);

            // Cleanup
            setTimeout(() => el.remove(), 40000);
        }

        // Fill screen initially
        for (let i = 0; i < 12; i++) {
            spawnSymbol();
            container.lastChild.style.animationDelay = `-${Math.random() * 20}s`;
        }

        // Continual spawn
        setInterval(spawnSymbol, 2500);
    </script>
</body>

</html>